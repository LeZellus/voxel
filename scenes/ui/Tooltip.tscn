[gd_scene load_steps=2 format=3 uid="uid://flj41j14g7i6"]

[sub_resource type="GDScript" id="GDScript_6354g"]
script/source = "extends Control

@onready var item_name: Label = $Background/VBoxContainer/ItemName
@onready var item_description: Label = $Background/VBoxContainer/ItemDescription
@onready var background: Panel = $Background

func _ready():
	# Configure le style de base
	modulate.a = 0.0
	
	# Configure le fond noir
	setup_background_style()
	
	# Configure les styles de texte
	setup_text_styles()
	
	# Animation d'apparition
	var tween = create_tween()
	tween.tween_property(self, \"modulate:a\", 1.0, 0.2)

func setup_background_style():
	# Crée un fond noir avec bordure
	var style_box = StyleBoxFlat.new()
	style_box.bg_color = Color(0.0, 0.0, 0.0, 0.9)  # Noir semi-transparent
	
	# Ajoute du padding
	style_box.content_margin_left = 600
	style_box.content_margin_right = 600
	style_box.content_margin_top = 600
	style_box.content_margin_bottom = 600
	
	background.add_theme_stylebox_override(\"panel\", style_box)
	background.custom_minimum_size = Vector2(268, 50)  # Taille minimale
	background.size = Vector2(400, 100)  # Taille de base
	
	# Forcez le VBoxContainer à respecter les marges
	var vbox = $Background/VBoxContainer
	vbox.set_anchors_and_offsets_preset(Control.PRESET_FULL_RECT)
	vbox.offset_left = 4
	vbox.offset_right = -4
	vbox.offset_top = 4
	vbox.offset_bottom = -4

func setup_text_styles():
	# Style pour le nom (plus gros)
	item_name.add_theme_font_size_override(\"font_size\", 20)
	
	# Style pour la description (taille normale)
	item_description.add_theme_color_override(\"font_color\", Color(0.9, 0.9, 0.9, 1.0))  # Blanc cassé

func setup_tooltip(item: Item):
	# Configure la tooltip avec les données de l'item
	if not item:
		print(\"Tooltip: item est null\")
		return
	
	# Configure le texte
	item_name.text = item.name if \"name\" in item else \"Item\"
	item_description.text = item.description if \"description\" in item else \"\"
	
	# Ajuste la taille si nécessaire
	await get_tree().process_frame
	adjust_size()

func adjust_size():
	# Ajuste la taille de la tooltip selon le contenu
	background.size = Vector2.ZERO
	size = Vector2.ZERO
"

[node name="Tooltip" type="Control"]
z_index = 10
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_6354g")

[node name="Background" type="Panel" parent="."]
layout_mode = 1

[node name="VBoxContainer" type="VBoxContainer" parent="Background"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="ItemName" type="Label" parent="Background/VBoxContainer"]
layout_mode = 2

[node name="ItemDescription" type="Label" parent="Background/VBoxContainer"]
layout_mode = 2
